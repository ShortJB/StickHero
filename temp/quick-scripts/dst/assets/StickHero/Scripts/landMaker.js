
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/StickHero/Scripts/landMaker.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'd0079DKriBNl693joESFHLy', 'landMaker');
// StickHero/Scripts/landMaker.js

"use strict";

var spriteCreator = require("spriteCreator");

var perfectLabel = require("perfectLabel");

var storageManager = require("storageManager");

var gameDirector = null;
window.fn = {};
var fsm;
cc.Class({
  "extends": cc.Component,
  properties: {
    landRange: cc.v2(20, 300),
    landWidth: cc.v2(20, 200),
    hero: cc.Node,
    firstLand: cc.Node,
    secondLand: cc.Node,
    moveDuration: 0.5,
    stickSpeed: 400,
    heroMoveSpeed: 400,
    // stick:cc.Node,
    // stickLengthen:false,
    stickWidth: 6,
    canvas: cc.Node,
    scoreLabel: cc.Label,
    hightestScoreLabel: cc.Label,
    overLabel: cc.Label,
    perfectLabel: cc.Node
  },
  onLoad: function onLoad() {
    fn.fsm = new StateMachine({
      data: {
        gameDirector: null
      },
      init: 'stand',
      transitions: [{
        name: 'stickLengthen',
        from: 'stand',
        to: 'stickLengthened'
      }, {
        name: 'heroTick',
        from: 'stickLengthened',
        to: 'heroTicked'
      }, {
        name: 'stickFall',
        from: 'heroTicked',
        to: 'stickFalled'
      }, {
        name: 'heroMoveToLand',
        from: 'stickFalled',
        to: 'heroMovedToLand'
      }, {
        name: 'landMove',
        from: 'heroMovedToLand',
        to: 'stand'
      }, {
        name: 'heroMoveToStickEnd',
        from: 'stickFalled',
        to: 'heroMovedToStickEnd'
      }, {
        name: 'heroDown',
        from: 'heroMovedToStickEnd',
        to: 'heroDowned'
      }, {
        name: 'gameOver',
        from: 'heroDowned',
        to: 'end'
      }, {
        name: 'restart',
        from: 'end',
        to: 'stand'
      }],
      methods: {
        onLeaveHeroTicked: function onLeaveHeroTicked() {
          gameDirector.unregisterEvent();
        },
        onStickLengthen: function onStickLengthen() {
          gameDirector.stickLengthen = true;
          gameDirector.stick = gameDirector.createStick();
          gameDirector.stick.x = gameDirector.hero.x + gameDirector.hero.width * (1 - gameDirector.hero.anchorX) + gameDirector.stick.width * gameDirector.stick.anchorX;
          var ani = gameDirector.hero.getComponent(cc.Animation);
          ani.play('heroPush');
        },
        onHeroTick: function onHeroTick() {
          gameDirector.stickLengthen = false;
          var ani = gameDirector.hero.getComponent(cc.Animation);
          ani.play('heroTick');
        },
        onStickFall: function onStickFall() {
          //stick fall action.
          var stickFall = cc.rotateBy(0.5, 90);
          stickFall.easing(cc.easeIn(3));
          var callFunc = cc.callFunc(function () {
            var stickLength = gameDirector.stick.height - gameDirector.stick.width * gameDirector.stick.anchorX;

            if (stickLength < gameDirector.currentLandRange || stickLength > gameDirector.currentLandRange + gameDirector.secondLand.width) {
              //failed.
              fsm.heroMoveToStickEnd();
            } else {
              //successed
              fsm.heroMoveToLand();

              if (stickLength > gameDirector.currentLandRange + gameDirector.secondLand.width / 2 - 5 && stickLength < gameDirector.currentLandRange + gameDirector.secondLand.width / 2 + 5) {
                gameDirector.perfect++;
                gameDirector.getScore(gameDirector.perfect);
                var pl = gameDirector.perfectLabel.getComponent(perfectLabel);
                pl.showPerfect(gameDirector.perfect);
              } else {
                gameDirector.perfect = 0;
              }
            }
          });
          var se = cc.sequence(stickFall, callFunc);
          gameDirector.stick.runAction(se);
        },
        onHeroMoveToLand: function onHeroMoveToLand() {
          var ani = gameDirector.hero.getComponent(cc.Animation);
          var callFunc = cc.callFunc(function () {
            ani.stop('heroRun');
            gameDirector.getScore();
            fsm.landMove();
          });
          ani.play('heroRun');
          gameDirector.heroMove(gameDirector.hero, {
            length: gameDirector.currentLandRange + gameDirector.secondLand.width,
            callFunc: callFunc
          });
        },
        onLandMove: function onLandMove() {
          var callFunc = cc.callFunc(function () {
            gameDirector.registerEvent();
          });
          gameDirector.landCreateAndMove(callFunc);
        },
        onHeroMoveToStickEnd: function onHeroMoveToStickEnd() {
          var ani = gameDirector.hero.getComponent(cc.Animation);
          var callFunc = cc.callFunc(function () {
            ani.stop('heroRun');
            fsm.heroDown();
          });
          ani.play('heroRun');
          gameDirector.heroMove(gameDirector.hero, {
            length: gameDirector.stick.height,
            callFunc: callFunc
          });
        },
        onHeroDown: function onHeroDown() {
          var callFunc = cc.callFunc(function () {
            fsm.gameOver();
          });
          gameDirector.stickAndHeroDownAction(callFunc);
        },
        onGameOver: function onGameOver() {
          gameDirector.overLabel.node.active = true;
        },
        onRestart: function onRestart() {
          cc.director.loadScene("MainGameScene");
        }
      }
    });
    fsm = fn.fsm; //init data
    // alert(storageManager.getHighestScore());

    gameDirector = this;
    this.runLength = 0, this.stick = null;
    this.stickLengthen = false;
    this.score = 0;
    this.perfect = 0;
    this.currentLandRange = 0;
    this.heroWorldPosX = 0;
    this.changeHightestScoreLabel(); //create new land;

    this.createNewLand();
    var range = this.getLandRange();
    this.heroWorldPosX = this.firstLand.width - (1 - this.hero.anchorX) * this.hero.width - this.stickWidth;
    this.secondLand.setPosition(range + this.firstLand.width, 0);
    this.registerEvent(); //init hero animation callback.

    var ani = gameDirector.hero.getComponent(cc.Animation); //ani.on('stop',(event)=>{
    //if(event.target.name =='heroTick'){
    //fsm.stickFall();
    //}
    //});

    ani.on('stop', this.onStop, this);
  },
  onStop: function onStop(event, state) {
    if (state && state._name && state._name === 'heroTick') {
      fsm.stickFall();
    }
  },
  registerEvent: function registerEvent() {
    this.canvas.on(cc.Node.EventType.TOUCH_START, this.touchStart.bind(this), this.node);
    this.canvas.on(cc.Node.EventType.TOUCH_END, this.touchEnd.bind(this), this.node);
    this.canvas.on(cc.Node.EventType.TOUCH_CANCEL, this.touchCancel.bind(this), this.node);
    console.log("on");
  },
  unregisterEvent: function unregisterEvent() {
    this.canvas.targetOff(this.node);
    console.log("off");
  },
  update: function update(dt) {
    // console.log(dt);
    if (this.stickLengthen) {
      this.stick.height += dt * this.stickSpeed; // this.stick.height = this.currentLandRange + this.secondLand.width/2;
    }
  },
  touchStart: function touchStart(event) {
    fsm.stickLengthen();
    cc.log("touchStart");
  },
  touchEnd: function touchEnd(event) {
    fsm.heroTick();
    cc.log("touchEnd");
  },
  touchCancel: function touchCancel() {
    this.touchEnd();
    cc.log("touchCancel");
  },
  stickAndHeroDownAction: function stickAndHeroDownAction(callFunc) {
    //stick down action;
    var stickAction = cc.rotateBy(0.5, 90);
    stickAction.easing(cc.easeIn(3));
    this.stick.runAction(stickAction); //hero down action;

    var heroAction = cc.moveBy(0.5, cc.v2(0, -300 - this.hero.height));
    heroAction.easing(cc.easeIn(3));
    var seq = cc.sequence(heroAction, callFunc);
    this.hero.runAction(seq);
  },
  heroMove: function heroMove(target, data) {
    var time = data.length / this.heroMoveSpeed;
    var heroMove = cc.moveBy(time, cc.v2(data.length, 0));

    if (data.callFunc) {
      var se = cc.sequence(heroMove, data.callFunc);
      this.hero.runAction(se);
    } else {
      this.hero.runAction(heroMove);
    }
  },
  landCreateAndMove: function landCreateAndMove(callFunc) {
    var winSize = cc.director.getWinSize(); //firstland;

    var length = this.currentLandRange + this.secondLand.width;
    this.runLength += length;
    var action = cc.moveBy(this.moveDuration, cc.v2(-length, 0));
    this.node.runAction(action);
    this.firstLand = this.secondLand;
    this.createNewLand(); //landRange

    var range = this.getLandRange(); //secondland;

    this.secondLand.setPosition(this.runLength + winSize.width, 0);
    var l = winSize.width - range - this.heroWorldPosX - this.hero.width * this.hero.anchorX - this.stickWidth;
    var secondAction = cc.moveBy(this.moveDuration, cc.v2(-l, 0));
    var seq = cc.sequence(secondAction, callFunc);
    this.secondLand.runAction(seq);
  },
  createStick: function createStick() {
    cc.log("sc");
    var stick = spriteCreator.createStick(this.stickWidth);
    stick.parent = this.node;
    return stick;
  },
  createNewLand: function createNewLand() {
    this.secondLand = spriteCreator.createNewLand(this.getLandWidth());
    this.secondLand.parent = this.node;
  },
  getScore: function getScore(num) {
    if (num) {
      this.score += num;
    } else {
      this.score++;
    }

    if (storageManager.getHighestScore() < this.score) {
      storageManager.setHighestScore(this.score);
      this.changeHightestScoreLabel();
    }

    this.scoreLabel.string = "得分:" + this.score;
  },
  changeHightestScoreLabel: function changeHightestScoreLabel() {
    this.hightestScoreLabel.string = "最高分:" + storageManager.getHighestScore();
  },
  getLandRange: function getLandRange() {
    this.currentLandRange = this.landRange.x + (this.landRange.y - this.landRange.x) * Math.random();
    var winSize = cc.director.getWinSize();

    if (winSize.width < this.currentLandRange + this.heroWorldPosX + this.hero.width + this.secondLand.width) {
      this.currentLandRange = winSize.width - this.heroWorldPosX - this.hero.width - this.secondLand.width;
    }

    return this.currentLandRange;
  },
  getLandWidth: function getLandWidth() {
    return this.landWidth.x + (this.landWidth.y - this.landWidth.x) * Math.random();
  }
});
module.exports = fsm;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU3RpY2tIZXJvXFxTY3JpcHRzXFxsYW5kTWFrZXIuanMiXSwibmFtZXMiOlsic3ByaXRlQ3JlYXRvciIsInJlcXVpcmUiLCJwZXJmZWN0TGFiZWwiLCJzdG9yYWdlTWFuYWdlciIsImdhbWVEaXJlY3RvciIsIndpbmRvdyIsImZuIiwiZnNtIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJsYW5kUmFuZ2UiLCJ2MiIsImxhbmRXaWR0aCIsImhlcm8iLCJOb2RlIiwiZmlyc3RMYW5kIiwic2Vjb25kTGFuZCIsIm1vdmVEdXJhdGlvbiIsInN0aWNrU3BlZWQiLCJoZXJvTW92ZVNwZWVkIiwic3RpY2tXaWR0aCIsImNhbnZhcyIsInNjb3JlTGFiZWwiLCJMYWJlbCIsImhpZ2h0ZXN0U2NvcmVMYWJlbCIsIm92ZXJMYWJlbCIsIm9uTG9hZCIsIlN0YXRlTWFjaGluZSIsImRhdGEiLCJpbml0IiwidHJhbnNpdGlvbnMiLCJuYW1lIiwiZnJvbSIsInRvIiwibWV0aG9kcyIsIm9uTGVhdmVIZXJvVGlja2VkIiwidW5yZWdpc3RlckV2ZW50Iiwib25TdGlja0xlbmd0aGVuIiwic3RpY2tMZW5ndGhlbiIsInN0aWNrIiwiY3JlYXRlU3RpY2siLCJ4Iiwid2lkdGgiLCJhbmNob3JYIiwiYW5pIiwiZ2V0Q29tcG9uZW50IiwiQW5pbWF0aW9uIiwicGxheSIsIm9uSGVyb1RpY2siLCJvblN0aWNrRmFsbCIsInN0aWNrRmFsbCIsInJvdGF0ZUJ5IiwiZWFzaW5nIiwiZWFzZUluIiwiY2FsbEZ1bmMiLCJzdGlja0xlbmd0aCIsImhlaWdodCIsImN1cnJlbnRMYW5kUmFuZ2UiLCJoZXJvTW92ZVRvU3RpY2tFbmQiLCJoZXJvTW92ZVRvTGFuZCIsInBlcmZlY3QiLCJnZXRTY29yZSIsInBsIiwic2hvd1BlcmZlY3QiLCJzZSIsInNlcXVlbmNlIiwicnVuQWN0aW9uIiwib25IZXJvTW92ZVRvTGFuZCIsInN0b3AiLCJsYW5kTW92ZSIsImhlcm9Nb3ZlIiwibGVuZ3RoIiwib25MYW5kTW92ZSIsInJlZ2lzdGVyRXZlbnQiLCJsYW5kQ3JlYXRlQW5kTW92ZSIsIm9uSGVyb01vdmVUb1N0aWNrRW5kIiwiaGVyb0Rvd24iLCJvbkhlcm9Eb3duIiwiZ2FtZU92ZXIiLCJzdGlja0FuZEhlcm9Eb3duQWN0aW9uIiwib25HYW1lT3ZlciIsIm5vZGUiLCJhY3RpdmUiLCJvblJlc3RhcnQiLCJkaXJlY3RvciIsImxvYWRTY2VuZSIsInJ1bkxlbmd0aCIsInNjb3JlIiwiaGVyb1dvcmxkUG9zWCIsImNoYW5nZUhpZ2h0ZXN0U2NvcmVMYWJlbCIsImNyZWF0ZU5ld0xhbmQiLCJyYW5nZSIsImdldExhbmRSYW5nZSIsInNldFBvc2l0aW9uIiwib24iLCJvblN0b3AiLCJldmVudCIsInN0YXRlIiwiX25hbWUiLCJFdmVudFR5cGUiLCJUT1VDSF9TVEFSVCIsInRvdWNoU3RhcnQiLCJiaW5kIiwiVE9VQ0hfRU5EIiwidG91Y2hFbmQiLCJUT1VDSF9DQU5DRUwiLCJ0b3VjaENhbmNlbCIsImNvbnNvbGUiLCJsb2ciLCJ0YXJnZXRPZmYiLCJ1cGRhdGUiLCJkdCIsImhlcm9UaWNrIiwic3RpY2tBY3Rpb24iLCJoZXJvQWN0aW9uIiwibW92ZUJ5Iiwic2VxIiwidGFyZ2V0IiwidGltZSIsIndpblNpemUiLCJnZXRXaW5TaXplIiwiYWN0aW9uIiwibCIsInNlY29uZEFjdGlvbiIsInBhcmVudCIsImdldExhbmRXaWR0aCIsIm51bSIsImdldEhpZ2hlc3RTY29yZSIsInNldEhpZ2hlc3RTY29yZSIsInN0cmluZyIsInkiLCJNYXRoIiwicmFuZG9tIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxhQUFhLEdBQUdDLE9BQU8sQ0FBQyxlQUFELENBQTNCOztBQUNBLElBQUlDLFlBQVksR0FBR0QsT0FBTyxDQUFDLGNBQUQsQ0FBMUI7O0FBQ0EsSUFBSUUsY0FBYyxHQUFHRixPQUFPLENBQUMsZ0JBQUQsQ0FBNUI7O0FBQ0EsSUFBSUcsWUFBWSxHQUFHLElBQW5CO0FBQ0FDLE1BQU0sQ0FBQ0MsRUFBUCxHQUFZLEVBQVo7QUFDQSxJQUFJQyxHQUFKO0FBQ0FDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBRUxDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxTQUFTLEVBQUVKLEVBQUUsQ0FBQ0ssRUFBSCxDQUFNLEVBQU4sRUFBVSxHQUFWLENBREg7QUFFUkMsSUFBQUEsU0FBUyxFQUFFTixFQUFFLENBQUNLLEVBQUgsQ0FBTSxFQUFOLEVBQVUsR0FBVixDQUZIO0FBR1JFLElBQUFBLElBQUksRUFBRVAsRUFBRSxDQUFDUSxJQUhEO0FBSVJDLElBQUFBLFNBQVMsRUFBRVQsRUFBRSxDQUFDUSxJQUpOO0FBS1JFLElBQUFBLFVBQVUsRUFBRVYsRUFBRSxDQUFDUSxJQUxQO0FBTVJHLElBQUFBLFlBQVksRUFBRSxHQU5OO0FBT1JDLElBQUFBLFVBQVUsRUFBRSxHQVBKO0FBUVJDLElBQUFBLGFBQWEsRUFBRSxHQVJQO0FBU1I7QUFDQTtBQUNBQyxJQUFBQSxVQUFVLEVBQUUsQ0FYSjtBQVlSQyxJQUFBQSxNQUFNLEVBQUVmLEVBQUUsQ0FBQ1EsSUFaSDtBQWFSUSxJQUFBQSxVQUFVLEVBQUVoQixFQUFFLENBQUNpQixLQWJQO0FBY1JDLElBQUFBLGtCQUFrQixFQUFFbEIsRUFBRSxDQUFDaUIsS0FkZjtBQWVSRSxJQUFBQSxTQUFTLEVBQUVuQixFQUFFLENBQUNpQixLQWZOO0FBZ0JSdkIsSUFBQUEsWUFBWSxFQUFFTSxFQUFFLENBQUNRO0FBaEJULEdBRlA7QUFvQkxZLEVBQUFBLE1BQU0sRUFBRSxrQkFBWTtBQUNoQnRCLElBQUFBLEVBQUUsQ0FBQ0MsR0FBSCxHQUFTLElBQUlzQixZQUFKLENBQWlCO0FBQ3RCQyxNQUFBQSxJQUFJLEVBQUU7QUFDRjFCLFFBQUFBLFlBQVksRUFBRTtBQURaLE9BRGdCO0FBSXRCMkIsTUFBQUEsSUFBSSxFQUFFLE9BSmdCO0FBS3RCQyxNQUFBQSxXQUFXLEVBQUUsQ0FDVDtBQUFFQyxRQUFBQSxJQUFJLEVBQUUsZUFBUjtBQUF5QkMsUUFBQUEsSUFBSSxFQUFFLE9BQS9CO0FBQXdDQyxRQUFBQSxFQUFFLEVBQUU7QUFBNUMsT0FEUyxFQUVUO0FBQUVGLFFBQUFBLElBQUksRUFBRSxVQUFSO0FBQW9CQyxRQUFBQSxJQUFJLEVBQUUsaUJBQTFCO0FBQTZDQyxRQUFBQSxFQUFFLEVBQUU7QUFBakQsT0FGUyxFQUdUO0FBQUVGLFFBQUFBLElBQUksRUFBRSxXQUFSO0FBQXFCQyxRQUFBQSxJQUFJLEVBQUUsWUFBM0I7QUFBeUNDLFFBQUFBLEVBQUUsRUFBRTtBQUE3QyxPQUhTLEVBSVQ7QUFBRUYsUUFBQUEsSUFBSSxFQUFFLGdCQUFSO0FBQTBCQyxRQUFBQSxJQUFJLEVBQUUsYUFBaEM7QUFBK0NDLFFBQUFBLEVBQUUsRUFBRTtBQUFuRCxPQUpTLEVBS1Q7QUFBRUYsUUFBQUEsSUFBSSxFQUFFLFVBQVI7QUFBb0JDLFFBQUFBLElBQUksRUFBRSxpQkFBMUI7QUFBNkNDLFFBQUFBLEVBQUUsRUFBRTtBQUFqRCxPQUxTLEVBTVQ7QUFBRUYsUUFBQUEsSUFBSSxFQUFFLG9CQUFSO0FBQThCQyxRQUFBQSxJQUFJLEVBQUUsYUFBcEM7QUFBbURDLFFBQUFBLEVBQUUsRUFBRTtBQUF2RCxPQU5TLEVBT1Q7QUFBRUYsUUFBQUEsSUFBSSxFQUFFLFVBQVI7QUFBb0JDLFFBQUFBLElBQUksRUFBRSxxQkFBMUI7QUFBaURDLFFBQUFBLEVBQUUsRUFBRTtBQUFyRCxPQVBTLEVBUVQ7QUFBRUYsUUFBQUEsSUFBSSxFQUFFLFVBQVI7QUFBb0JDLFFBQUFBLElBQUksRUFBRSxZQUExQjtBQUF3Q0MsUUFBQUEsRUFBRSxFQUFFO0FBQTVDLE9BUlMsRUFTVDtBQUFFRixRQUFBQSxJQUFJLEVBQUUsU0FBUjtBQUFtQkMsUUFBQUEsSUFBSSxFQUFFLEtBQXpCO0FBQWdDQyxRQUFBQSxFQUFFLEVBQUU7QUFBcEMsT0FUUyxDQUxTO0FBZ0J0QkMsTUFBQUEsT0FBTyxFQUFFO0FBQ0xDLFFBQUFBLGlCQURLLCtCQUNlO0FBQ2hCakMsVUFBQUEsWUFBWSxDQUFDa0MsZUFBYjtBQUNILFNBSEk7QUFJTEMsUUFBQUEsZUFKSyw2QkFJYTtBQUNkbkMsVUFBQUEsWUFBWSxDQUFDb0MsYUFBYixHQUE2QixJQUE3QjtBQUNBcEMsVUFBQUEsWUFBWSxDQUFDcUMsS0FBYixHQUFxQnJDLFlBQVksQ0FBQ3NDLFdBQWIsRUFBckI7QUFDQXRDLFVBQUFBLFlBQVksQ0FBQ3FDLEtBQWIsQ0FBbUJFLENBQW5CLEdBQXVCdkMsWUFBWSxDQUFDVyxJQUFiLENBQWtCNEIsQ0FBbEIsR0FBc0J2QyxZQUFZLENBQUNXLElBQWIsQ0FBa0I2QixLQUFsQixJQUEyQixJQUFJeEMsWUFBWSxDQUFDVyxJQUFiLENBQWtCOEIsT0FBakQsQ0FBdEIsR0FBa0Z6QyxZQUFZLENBQUNxQyxLQUFiLENBQW1CRyxLQUFuQixHQUEyQnhDLFlBQVksQ0FBQ3FDLEtBQWIsQ0FBbUJJLE9BQXZKO0FBQ0EsY0FBSUMsR0FBRyxHQUFHMUMsWUFBWSxDQUFDVyxJQUFiLENBQWtCZ0MsWUFBbEIsQ0FBK0J2QyxFQUFFLENBQUN3QyxTQUFsQyxDQUFWO0FBQ0FGLFVBQUFBLEdBQUcsQ0FBQ0csSUFBSixDQUFTLFVBQVQ7QUFDSCxTQVZJO0FBV0xDLFFBQUFBLFVBWEssd0JBV1E7QUFDVDlDLFVBQUFBLFlBQVksQ0FBQ29DLGFBQWIsR0FBNkIsS0FBN0I7QUFDQSxjQUFJTSxHQUFHLEdBQUcxQyxZQUFZLENBQUNXLElBQWIsQ0FBa0JnQyxZQUFsQixDQUErQnZDLEVBQUUsQ0FBQ3dDLFNBQWxDLENBQVY7QUFDQUYsVUFBQUEsR0FBRyxDQUFDRyxJQUFKLENBQVMsVUFBVDtBQUNILFNBZkk7QUFnQkxFLFFBQUFBLFdBaEJLLHlCQWdCUztBQUNWO0FBQ0EsY0FBSUMsU0FBUyxHQUFHNUMsRUFBRSxDQUFDNkMsUUFBSCxDQUFZLEdBQVosRUFBaUIsRUFBakIsQ0FBaEI7QUFDQUQsVUFBQUEsU0FBUyxDQUFDRSxNQUFWLENBQWlCOUMsRUFBRSxDQUFDK0MsTUFBSCxDQUFVLENBQVYsQ0FBakI7QUFDQSxjQUFJQyxRQUFRLEdBQUdoRCxFQUFFLENBQUNnRCxRQUFILENBQVksWUFBWTtBQUNuQyxnQkFBSUMsV0FBVyxHQUFHckQsWUFBWSxDQUFDcUMsS0FBYixDQUFtQmlCLE1BQW5CLEdBQTRCdEQsWUFBWSxDQUFDcUMsS0FBYixDQUFtQkcsS0FBbkIsR0FBMkJ4QyxZQUFZLENBQUNxQyxLQUFiLENBQW1CSSxPQUE1Rjs7QUFDQSxnQkFBSVksV0FBVyxHQUFHckQsWUFBWSxDQUFDdUQsZ0JBQTNCLElBQStDRixXQUFXLEdBQUdyRCxZQUFZLENBQUN1RCxnQkFBYixHQUFnQ3ZELFlBQVksQ0FBQ2MsVUFBYixDQUF3QjBCLEtBQXpILEVBQWdJO0FBQUM7QUFDN0hyQyxjQUFBQSxHQUFHLENBQUNxRCxrQkFBSjtBQUNILGFBRkQsTUFFTztBQUFDO0FBQ0pyRCxjQUFBQSxHQUFHLENBQUNzRCxjQUFKOztBQUNBLGtCQUFJSixXQUFXLEdBQUdyRCxZQUFZLENBQUN1RCxnQkFBYixHQUFnQ3ZELFlBQVksQ0FBQ2MsVUFBYixDQUF3QjBCLEtBQXhCLEdBQWdDLENBQWhFLEdBQW9FLENBQWxGLElBQ0dhLFdBQVcsR0FBR3JELFlBQVksQ0FBQ3VELGdCQUFiLEdBQWdDdkQsWUFBWSxDQUFDYyxVQUFiLENBQXdCMEIsS0FBeEIsR0FBZ0MsQ0FBaEUsR0FBb0UsQ0FEekYsRUFDNEY7QUFDeEZ4QyxnQkFBQUEsWUFBWSxDQUFDMEQsT0FBYjtBQUNBMUQsZ0JBQUFBLFlBQVksQ0FBQzJELFFBQWIsQ0FBc0IzRCxZQUFZLENBQUMwRCxPQUFuQztBQUNBLG9CQUFJRSxFQUFFLEdBQUc1RCxZQUFZLENBQUNGLFlBQWIsQ0FBMEI2QyxZQUExQixDQUF1QzdDLFlBQXZDLENBQVQ7QUFDQThELGdCQUFBQSxFQUFFLENBQUNDLFdBQUgsQ0FBZTdELFlBQVksQ0FBQzBELE9BQTVCO0FBQ0gsZUFORCxNQU1PO0FBQ0gxRCxnQkFBQUEsWUFBWSxDQUFDMEQsT0FBYixHQUF1QixDQUF2QjtBQUNIO0FBQ0o7QUFDSixXQWhCYyxDQUFmO0FBaUJBLGNBQUlJLEVBQUUsR0FBRzFELEVBQUUsQ0FBQzJELFFBQUgsQ0FBWWYsU0FBWixFQUF1QkksUUFBdkIsQ0FBVDtBQUNBcEQsVUFBQUEsWUFBWSxDQUFDcUMsS0FBYixDQUFtQjJCLFNBQW5CLENBQTZCRixFQUE3QjtBQUNILFNBdkNJO0FBd0NMRyxRQUFBQSxnQkF4Q0ssOEJBd0NjO0FBQ2YsY0FBSXZCLEdBQUcsR0FBRzFDLFlBQVksQ0FBQ1csSUFBYixDQUFrQmdDLFlBQWxCLENBQStCdkMsRUFBRSxDQUFDd0MsU0FBbEMsQ0FBVjtBQUNBLGNBQUlRLFFBQVEsR0FBR2hELEVBQUUsQ0FBQ2dELFFBQUgsQ0FBWSxZQUFZO0FBQ25DVixZQUFBQSxHQUFHLENBQUN3QixJQUFKLENBQVMsU0FBVDtBQUNBbEUsWUFBQUEsWUFBWSxDQUFDMkQsUUFBYjtBQUNBeEQsWUFBQUEsR0FBRyxDQUFDZ0UsUUFBSjtBQUNILFdBSmMsQ0FBZjtBQUtBekIsVUFBQUEsR0FBRyxDQUFDRyxJQUFKLENBQVMsU0FBVDtBQUNBN0MsVUFBQUEsWUFBWSxDQUFDb0UsUUFBYixDQUFzQnBFLFlBQVksQ0FBQ1csSUFBbkMsRUFBeUM7QUFBRTBELFlBQUFBLE1BQU0sRUFBRXJFLFlBQVksQ0FBQ3VELGdCQUFiLEdBQWdDdkQsWUFBWSxDQUFDYyxVQUFiLENBQXdCMEIsS0FBbEU7QUFBeUVZLFlBQUFBLFFBQVEsRUFBRUE7QUFBbkYsV0FBekM7QUFDSCxTQWpESTtBQWtETGtCLFFBQUFBLFVBbERLLHdCQWtEUTtBQUNULGNBQUlsQixRQUFRLEdBQUdoRCxFQUFFLENBQUNnRCxRQUFILENBQVksWUFBWTtBQUNuQ3BELFlBQUFBLFlBQVksQ0FBQ3VFLGFBQWI7QUFDSCxXQUZjLENBQWY7QUFHQXZFLFVBQUFBLFlBQVksQ0FBQ3dFLGlCQUFiLENBQStCcEIsUUFBL0I7QUFDSCxTQXZESTtBQXdETHFCLFFBQUFBLG9CQXhESyxrQ0F3RGtCO0FBQ25CLGNBQUkvQixHQUFHLEdBQUcxQyxZQUFZLENBQUNXLElBQWIsQ0FBa0JnQyxZQUFsQixDQUErQnZDLEVBQUUsQ0FBQ3dDLFNBQWxDLENBQVY7QUFDQSxjQUFJUSxRQUFRLEdBQUdoRCxFQUFFLENBQUNnRCxRQUFILENBQVksWUFBWTtBQUNuQ1YsWUFBQUEsR0FBRyxDQUFDd0IsSUFBSixDQUFTLFNBQVQ7QUFDQS9ELFlBQUFBLEdBQUcsQ0FBQ3VFLFFBQUo7QUFDSCxXQUhjLENBQWY7QUFJQWhDLFVBQUFBLEdBQUcsQ0FBQ0csSUFBSixDQUFTLFNBQVQ7QUFDQTdDLFVBQUFBLFlBQVksQ0FBQ29FLFFBQWIsQ0FBc0JwRSxZQUFZLENBQUNXLElBQW5DLEVBQXlDO0FBQUUwRCxZQUFBQSxNQUFNLEVBQUVyRSxZQUFZLENBQUNxQyxLQUFiLENBQW1CaUIsTUFBN0I7QUFBcUNGLFlBQUFBLFFBQVEsRUFBRUE7QUFBL0MsV0FBekM7QUFDSCxTQWhFSTtBQWlFTHVCLFFBQUFBLFVBakVLLHdCQWlFUTtBQUNULGNBQUl2QixRQUFRLEdBQUdoRCxFQUFFLENBQUNnRCxRQUFILENBQVksWUFBWTtBQUNuQ2pELFlBQUFBLEdBQUcsQ0FBQ3lFLFFBQUo7QUFDSCxXQUZjLENBQWY7QUFHQTVFLFVBQUFBLFlBQVksQ0FBQzZFLHNCQUFiLENBQW9DekIsUUFBcEM7QUFDSCxTQXRFSTtBQXVFTDBCLFFBQUFBLFVBdkVLLHdCQXVFUTtBQUNUOUUsVUFBQUEsWUFBWSxDQUFDdUIsU0FBYixDQUF1QndELElBQXZCLENBQTRCQyxNQUE1QixHQUFxQyxJQUFyQztBQUNILFNBekVJO0FBMEVMQyxRQUFBQSxTQTFFSyx1QkEwRU87QUFDUjdFLFVBQUFBLEVBQUUsQ0FBQzhFLFFBQUgsQ0FBWUMsU0FBWixDQUFzQixlQUF0QjtBQUNIO0FBNUVJO0FBaEJhLEtBQWpCLENBQVQ7QUFnR0FoRixJQUFBQSxHQUFHLEdBQUdELEVBQUUsQ0FBQ0MsR0FBVCxDQWpHZ0IsQ0FrR2hCO0FBQ0E7O0FBQ0FILElBQUFBLFlBQVksR0FBRyxJQUFmO0FBQ0EsU0FBS29GLFNBQUwsR0FBaUIsQ0FBakIsRUFDSSxLQUFLL0MsS0FBTCxHQUFhLElBRGpCO0FBRUEsU0FBS0QsYUFBTCxHQUFxQixLQUFyQjtBQUNBLFNBQUtpRCxLQUFMLEdBQWEsQ0FBYjtBQUNBLFNBQUszQixPQUFMLEdBQWUsQ0FBZjtBQUNBLFNBQUtILGdCQUFMLEdBQXdCLENBQXhCO0FBQ0EsU0FBSytCLGFBQUwsR0FBcUIsQ0FBckI7QUFDQSxTQUFLQyx3QkFBTCxHQTVHZ0IsQ0E4R2hCOztBQUNBLFNBQUtDLGFBQUw7QUFDQSxRQUFJQyxLQUFLLEdBQUcsS0FBS0MsWUFBTCxFQUFaO0FBQ0EsU0FBS0osYUFBTCxHQUFxQixLQUFLekUsU0FBTCxDQUFlMkIsS0FBZixHQUF1QixDQUFDLElBQUksS0FBSzdCLElBQUwsQ0FBVThCLE9BQWYsSUFBMEIsS0FBSzlCLElBQUwsQ0FBVTZCLEtBQTNELEdBQW1FLEtBQUt0QixVQUE3RjtBQUNBLFNBQUtKLFVBQUwsQ0FBZ0I2RSxXQUFoQixDQUE0QkYsS0FBSyxHQUFHLEtBQUs1RSxTQUFMLENBQWUyQixLQUFuRCxFQUEwRCxDQUExRDtBQUVBLFNBQUsrQixhQUFMLEdBcEhnQixDQXFIaEI7O0FBQ0EsUUFBSTdCLEdBQUcsR0FBRzFDLFlBQVksQ0FBQ1csSUFBYixDQUFrQmdDLFlBQWxCLENBQStCdkMsRUFBRSxDQUFDd0MsU0FBbEMsQ0FBVixDQXRIZ0IsQ0F1SGhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0FGLElBQUFBLEdBQUcsQ0FBQ2tELEVBQUosQ0FBTyxNQUFQLEVBQWUsS0FBS0MsTUFBcEIsRUFBNEIsSUFBNUI7QUFDSCxHQWpKSTtBQW1KTEEsRUFBQUEsTUFBTSxFQUFDLGdCQUFVQyxLQUFWLEVBQWlCQyxLQUFqQixFQUF3QjtBQUMzQixRQUFHQSxLQUFLLElBQUdBLEtBQUssQ0FBQ0MsS0FBZCxJQUF1QkQsS0FBSyxDQUFDQyxLQUFOLEtBQWdCLFVBQTFDLEVBQXFEO0FBQ2pEN0YsTUFBQUEsR0FBRyxDQUFDNkMsU0FBSjtBQUNIO0FBQ0osR0F2Skk7QUF5Skx1QixFQUFBQSxhQXpKSywyQkF5Slc7QUFDWixTQUFLcEQsTUFBTCxDQUFZeUUsRUFBWixDQUFleEYsRUFBRSxDQUFDUSxJQUFILENBQVFxRixTQUFSLENBQWtCQyxXQUFqQyxFQUE4QyxLQUFLQyxVQUFMLENBQWdCQyxJQUFoQixDQUFxQixJQUFyQixDQUE5QyxFQUEwRSxLQUFLckIsSUFBL0U7QUFDQSxTQUFLNUQsTUFBTCxDQUFZeUUsRUFBWixDQUFleEYsRUFBRSxDQUFDUSxJQUFILENBQVFxRixTQUFSLENBQWtCSSxTQUFqQyxFQUE0QyxLQUFLQyxRQUFMLENBQWNGLElBQWQsQ0FBbUIsSUFBbkIsQ0FBNUMsRUFBc0UsS0FBS3JCLElBQTNFO0FBQ0EsU0FBSzVELE1BQUwsQ0FBWXlFLEVBQVosQ0FBZXhGLEVBQUUsQ0FBQ1EsSUFBSCxDQUFRcUYsU0FBUixDQUFrQk0sWUFBakMsRUFBK0MsS0FBS0MsV0FBTCxDQUFpQkosSUFBakIsQ0FBc0IsSUFBdEIsQ0FBL0MsRUFBNEUsS0FBS3JCLElBQWpGO0FBQ0EwQixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxJQUFaO0FBQ0gsR0E5Skk7QUFnS0x4RSxFQUFBQSxlQWhLSyw2QkFnS2E7QUFDZCxTQUFLZixNQUFMLENBQVl3RixTQUFaLENBQXNCLEtBQUs1QixJQUEzQjtBQUNBMEIsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksS0FBWjtBQUNILEdBbktJO0FBb0tMRSxFQUFBQSxNQXBLSyxrQkFvS0VDLEVBcEtGLEVBb0tNO0FBQ1A7QUFDQSxRQUFJLEtBQUt6RSxhQUFULEVBQXdCO0FBQ3BCLFdBQUtDLEtBQUwsQ0FBV2lCLE1BQVgsSUFBcUJ1RCxFQUFFLEdBQUcsS0FBSzdGLFVBQS9CLENBRG9CLENBRXBCO0FBQ0g7QUFDSixHQTFLSTtBQTJLTG1GLEVBQUFBLFVBM0tLLHNCQTJLTUwsS0EzS04sRUEyS2E7QUFDZDNGLElBQUFBLEdBQUcsQ0FBQ2lDLGFBQUo7QUFDQWhDLElBQUFBLEVBQUUsQ0FBQ3NHLEdBQUgsQ0FBTyxZQUFQO0FBQ0gsR0E5S0k7QUErS0xKLEVBQUFBLFFBL0tLLG9CQStLSVIsS0EvS0osRUErS1c7QUFDWjNGLElBQUFBLEdBQUcsQ0FBQzJHLFFBQUo7QUFDQTFHLElBQUFBLEVBQUUsQ0FBQ3NHLEdBQUgsQ0FBTyxVQUFQO0FBQ0gsR0FsTEk7QUFtTExGLEVBQUFBLFdBbkxLLHlCQW1MUztBQUNWLFNBQUtGLFFBQUw7QUFDQWxHLElBQUFBLEVBQUUsQ0FBQ3NHLEdBQUgsQ0FBTyxhQUFQO0FBQ0gsR0F0TEk7QUF1TEw3QixFQUFBQSxzQkF2TEssa0NBdUxrQnpCLFFBdkxsQixFQXVMNEI7QUFDN0I7QUFDQSxRQUFJMkQsV0FBVyxHQUFHM0csRUFBRSxDQUFDNkMsUUFBSCxDQUFZLEdBQVosRUFBaUIsRUFBakIsQ0FBbEI7QUFDQThELElBQUFBLFdBQVcsQ0FBQzdELE1BQVosQ0FBbUI5QyxFQUFFLENBQUMrQyxNQUFILENBQVUsQ0FBVixDQUFuQjtBQUNBLFNBQUtkLEtBQUwsQ0FBVzJCLFNBQVgsQ0FBcUIrQyxXQUFyQixFQUo2QixDQUs3Qjs7QUFDQSxRQUFJQyxVQUFVLEdBQUc1RyxFQUFFLENBQUM2RyxNQUFILENBQVUsR0FBVixFQUFlN0csRUFBRSxDQUFDSyxFQUFILENBQU0sQ0FBTixFQUFTLENBQUMsR0FBRCxHQUFPLEtBQUtFLElBQUwsQ0FBVTJDLE1BQTFCLENBQWYsQ0FBakI7QUFDQTBELElBQUFBLFVBQVUsQ0FBQzlELE1BQVgsQ0FBa0I5QyxFQUFFLENBQUMrQyxNQUFILENBQVUsQ0FBVixDQUFsQjtBQUNBLFFBQUkrRCxHQUFHLEdBQUc5RyxFQUFFLENBQUMyRCxRQUFILENBQVlpRCxVQUFaLEVBQXdCNUQsUUFBeEIsQ0FBVjtBQUNBLFNBQUt6QyxJQUFMLENBQVVxRCxTQUFWLENBQW9Ca0QsR0FBcEI7QUFDSCxHQWpNSTtBQWtNTDlDLEVBQUFBLFFBbE1LLG9CQWtNSStDLE1BbE1KLEVBa01ZekYsSUFsTVosRUFrTWtCO0FBQ25CLFFBQUkwRixJQUFJLEdBQUcxRixJQUFJLENBQUMyQyxNQUFMLEdBQWMsS0FBS3BELGFBQTlCO0FBQ0EsUUFBSW1ELFFBQVEsR0FBR2hFLEVBQUUsQ0FBQzZHLE1BQUgsQ0FBVUcsSUFBVixFQUFnQmhILEVBQUUsQ0FBQ0ssRUFBSCxDQUFNaUIsSUFBSSxDQUFDMkMsTUFBWCxFQUFtQixDQUFuQixDQUFoQixDQUFmOztBQUNBLFFBQUkzQyxJQUFJLENBQUMwQixRQUFULEVBQW1CO0FBQ2YsVUFBSVUsRUFBRSxHQUFHMUQsRUFBRSxDQUFDMkQsUUFBSCxDQUFZSyxRQUFaLEVBQXNCMUMsSUFBSSxDQUFDMEIsUUFBM0IsQ0FBVDtBQUNBLFdBQUt6QyxJQUFMLENBQVVxRCxTQUFWLENBQW9CRixFQUFwQjtBQUNILEtBSEQsTUFHTztBQUNILFdBQUtuRCxJQUFMLENBQVVxRCxTQUFWLENBQW9CSSxRQUFwQjtBQUNIO0FBQ0osR0EzTUk7QUE0TUxJLEVBQUFBLGlCQTVNSyw2QkE0TWFwQixRQTVNYixFQTRNdUI7QUFDeEIsUUFBSWlFLE9BQU8sR0FBR2pILEVBQUUsQ0FBQzhFLFFBQUgsQ0FBWW9DLFVBQVosRUFBZCxDQUR3QixDQUV4Qjs7QUFDQSxRQUFJakQsTUFBTSxHQUFHLEtBQUtkLGdCQUFMLEdBQXdCLEtBQUt6QyxVQUFMLENBQWdCMEIsS0FBckQ7QUFDQSxTQUFLNEMsU0FBTCxJQUFrQmYsTUFBbEI7QUFDQSxRQUFJa0QsTUFBTSxHQUFHbkgsRUFBRSxDQUFDNkcsTUFBSCxDQUFVLEtBQUtsRyxZQUFmLEVBQTZCWCxFQUFFLENBQUNLLEVBQUgsQ0FBTSxDQUFDNEQsTUFBUCxFQUFlLENBQWYsQ0FBN0IsQ0FBYjtBQUNBLFNBQUtVLElBQUwsQ0FBVWYsU0FBVixDQUFvQnVELE1BQXBCO0FBQ0EsU0FBSzFHLFNBQUwsR0FBaUIsS0FBS0MsVUFBdEI7QUFFQSxTQUFLMEUsYUFBTCxHQVR3QixDQVd4Qjs7QUFDQSxRQUFJQyxLQUFLLEdBQUcsS0FBS0MsWUFBTCxFQUFaLENBWndCLENBY3hCOztBQUNBLFNBQUs1RSxVQUFMLENBQWdCNkUsV0FBaEIsQ0FBNEIsS0FBS1AsU0FBTCxHQUFpQmlDLE9BQU8sQ0FBQzdFLEtBQXJELEVBQTRELENBQTVEO0FBQ0EsUUFBSWdGLENBQUMsR0FBR0gsT0FBTyxDQUFDN0UsS0FBUixHQUFnQmlELEtBQWhCLEdBQXdCLEtBQUtILGFBQTdCLEdBQTZDLEtBQUszRSxJQUFMLENBQVU2QixLQUFWLEdBQWtCLEtBQUs3QixJQUFMLENBQVU4QixPQUF6RSxHQUFtRixLQUFLdkIsVUFBaEc7QUFDQSxRQUFJdUcsWUFBWSxHQUFHckgsRUFBRSxDQUFDNkcsTUFBSCxDQUFVLEtBQUtsRyxZQUFmLEVBQTZCWCxFQUFFLENBQUNLLEVBQUgsQ0FBTSxDQUFDK0csQ0FBUCxFQUFVLENBQVYsQ0FBN0IsQ0FBbkI7QUFDQSxRQUFJTixHQUFHLEdBQUc5RyxFQUFFLENBQUMyRCxRQUFILENBQVkwRCxZQUFaLEVBQTBCckUsUUFBMUIsQ0FBVjtBQUNBLFNBQUt0QyxVQUFMLENBQWdCa0QsU0FBaEIsQ0FBMEJrRCxHQUExQjtBQUNILEdBaE9JO0FBaU9MNUUsRUFBQUEsV0FqT0sseUJBaU9TO0FBQ1ZsQyxJQUFBQSxFQUFFLENBQUNzRyxHQUFILENBQU8sSUFBUDtBQUNBLFFBQUlyRSxLQUFLLEdBQUd6QyxhQUFhLENBQUMwQyxXQUFkLENBQTBCLEtBQUtwQixVQUEvQixDQUFaO0FBQ0FtQixJQUFBQSxLQUFLLENBQUNxRixNQUFOLEdBQWUsS0FBSzNDLElBQXBCO0FBQ0EsV0FBTzFDLEtBQVA7QUFDSCxHQXRPSTtBQXVPTG1ELEVBQUFBLGFBdk9LLDJCQXVPVztBQUNaLFNBQUsxRSxVQUFMLEdBQWtCbEIsYUFBYSxDQUFDNEYsYUFBZCxDQUE0QixLQUFLbUMsWUFBTCxFQUE1QixDQUFsQjtBQUNBLFNBQUs3RyxVQUFMLENBQWdCNEcsTUFBaEIsR0FBeUIsS0FBSzNDLElBQTlCO0FBQ0gsR0ExT0k7QUEyT0xwQixFQUFBQSxRQTNPSyxvQkEyT0lpRSxHQTNPSixFQTJPUztBQUNWLFFBQUlBLEdBQUosRUFBUztBQUNMLFdBQUt2QyxLQUFMLElBQWN1QyxHQUFkO0FBQ0gsS0FGRCxNQUVPO0FBQ0gsV0FBS3ZDLEtBQUw7QUFDSDs7QUFDRCxRQUFJdEYsY0FBYyxDQUFDOEgsZUFBZixLQUFtQyxLQUFLeEMsS0FBNUMsRUFBbUQ7QUFDL0N0RixNQUFBQSxjQUFjLENBQUMrSCxlQUFmLENBQStCLEtBQUt6QyxLQUFwQztBQUNBLFdBQUtFLHdCQUFMO0FBQ0g7O0FBQ0QsU0FBS25FLFVBQUwsQ0FBZ0IyRyxNQUFoQixHQUF5QixRQUFRLEtBQUsxQyxLQUF0QztBQUNILEdBdFBJO0FBdVBMRSxFQUFBQSx3QkF2UEssc0NBdVBzQjtBQUN2QixTQUFLakUsa0JBQUwsQ0FBd0J5RyxNQUF4QixHQUFpQyxTQUFTaEksY0FBYyxDQUFDOEgsZUFBZixFQUExQztBQUNILEdBelBJO0FBMFBMbkMsRUFBQUEsWUExUEssMEJBMFBVO0FBQ1gsU0FBS25DLGdCQUFMLEdBQXdCLEtBQUsvQyxTQUFMLENBQWUrQixDQUFmLEdBQW1CLENBQUMsS0FBSy9CLFNBQUwsQ0FBZXdILENBQWYsR0FBbUIsS0FBS3hILFNBQUwsQ0FBZStCLENBQW5DLElBQXdDMEYsSUFBSSxDQUFDQyxNQUFMLEVBQW5GO0FBQ0EsUUFBSWIsT0FBTyxHQUFHakgsRUFBRSxDQUFDOEUsUUFBSCxDQUFZb0MsVUFBWixFQUFkOztBQUNBLFFBQUlELE9BQU8sQ0FBQzdFLEtBQVIsR0FBZ0IsS0FBS2UsZ0JBQUwsR0FBd0IsS0FBSytCLGFBQTdCLEdBQTZDLEtBQUszRSxJQUFMLENBQVU2QixLQUF2RCxHQUErRCxLQUFLMUIsVUFBTCxDQUFnQjBCLEtBQW5HLEVBQTBHO0FBQ3RHLFdBQUtlLGdCQUFMLEdBQXdCOEQsT0FBTyxDQUFDN0UsS0FBUixHQUFnQixLQUFLOEMsYUFBckIsR0FBcUMsS0FBSzNFLElBQUwsQ0FBVTZCLEtBQS9DLEdBQXVELEtBQUsxQixVQUFMLENBQWdCMEIsS0FBL0Y7QUFDSDs7QUFDRCxXQUFPLEtBQUtlLGdCQUFaO0FBQ0gsR0FqUUk7QUFrUUxvRSxFQUFBQSxZQWxRSywwQkFrUVU7QUFDWCxXQUFPLEtBQUtqSCxTQUFMLENBQWU2QixDQUFmLEdBQW1CLENBQUMsS0FBSzdCLFNBQUwsQ0FBZXNILENBQWYsR0FBbUIsS0FBS3RILFNBQUwsQ0FBZTZCLENBQW5DLElBQXdDMEYsSUFBSSxDQUFDQyxNQUFMLEVBQWxFO0FBQ0g7QUFwUUksQ0FBVDtBQXNRQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCakksR0FBakIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBzcHJpdGVDcmVhdG9yID0gcmVxdWlyZShcInNwcml0ZUNyZWF0b3JcIik7XHJcbnZhciBwZXJmZWN0TGFiZWwgPSByZXF1aXJlKFwicGVyZmVjdExhYmVsXCIpO1xyXG52YXIgc3RvcmFnZU1hbmFnZXIgPSByZXF1aXJlKFwic3RvcmFnZU1hbmFnZXJcIik7XHJcbnZhciBnYW1lRGlyZWN0b3IgPSBudWxsO1xyXG53aW5kb3cuZm4gPSB7fTtcclxudmFyIGZzbTtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGxhbmRSYW5nZTogY2MudjIoMjAsIDMwMCksXHJcbiAgICAgICAgbGFuZFdpZHRoOiBjYy52MigyMCwgMjAwKSxcclxuICAgICAgICBoZXJvOiBjYy5Ob2RlLFxyXG4gICAgICAgIGZpcnN0TGFuZDogY2MuTm9kZSxcclxuICAgICAgICBzZWNvbmRMYW5kOiBjYy5Ob2RlLFxyXG4gICAgICAgIG1vdmVEdXJhdGlvbjogMC41LFxyXG4gICAgICAgIHN0aWNrU3BlZWQ6IDQwMCxcclxuICAgICAgICBoZXJvTW92ZVNwZWVkOiA0MDAsXHJcbiAgICAgICAgLy8gc3RpY2s6Y2MuTm9kZSxcclxuICAgICAgICAvLyBzdGlja0xlbmd0aGVuOmZhbHNlLFxyXG4gICAgICAgIHN0aWNrV2lkdGg6IDYsXHJcbiAgICAgICAgY2FudmFzOiBjYy5Ob2RlLFxyXG4gICAgICAgIHNjb3JlTGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIGhpZ2h0ZXN0U2NvcmVMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgb3ZlckxhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBwZXJmZWN0TGFiZWw6IGNjLk5vZGVcclxuICAgIH0sXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmbi5mc20gPSBuZXcgU3RhdGVNYWNoaW5lKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgZ2FtZURpcmVjdG9yOiBudWxsLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpbml0OiAnc3RhbmQnLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uczogW1xyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnc3RpY2tMZW5ndGhlbicsIGZyb206ICdzdGFuZCcsIHRvOiAnc3RpY2tMZW5ndGhlbmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnaGVyb1RpY2snLCBmcm9tOiAnc3RpY2tMZW5ndGhlbmVkJywgdG86ICdoZXJvVGlja2VkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnc3RpY2tGYWxsJywgZnJvbTogJ2hlcm9UaWNrZWQnLCB0bzogJ3N0aWNrRmFsbGVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnaGVyb01vdmVUb0xhbmQnLCBmcm9tOiAnc3RpY2tGYWxsZWQnLCB0bzogJ2hlcm9Nb3ZlZFRvTGFuZCcgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ2xhbmRNb3ZlJywgZnJvbTogJ2hlcm9Nb3ZlZFRvTGFuZCcsIHRvOiAnc3RhbmQnIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdoZXJvTW92ZVRvU3RpY2tFbmQnLCBmcm9tOiAnc3RpY2tGYWxsZWQnLCB0bzogJ2hlcm9Nb3ZlZFRvU3RpY2tFbmQnIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdoZXJvRG93bicsIGZyb206ICdoZXJvTW92ZWRUb1N0aWNrRW5kJywgdG86ICdoZXJvRG93bmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnZ2FtZU92ZXInLCBmcm9tOiAnaGVyb0Rvd25lZCcsIHRvOiAnZW5kJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAncmVzdGFydCcsIGZyb206ICdlbmQnLCB0bzogJ3N0YW5kJyB9LFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICAgICAgICBvbkxlYXZlSGVyb1RpY2tlZCgpIHtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3IudW5yZWdpc3RlckV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25TdGlja0xlbmd0aGVuKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVEaXJlY3Rvci5zdGlja0xlbmd0aGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3Iuc3RpY2sgPSBnYW1lRGlyZWN0b3IuY3JlYXRlU3RpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3Iuc3RpY2sueCA9IGdhbWVEaXJlY3Rvci5oZXJvLnggKyBnYW1lRGlyZWN0b3IuaGVyby53aWR0aCAqICgxIC0gZ2FtZURpcmVjdG9yLmhlcm8uYW5jaG9yWCkgKyBnYW1lRGlyZWN0b3Iuc3RpY2sud2lkdGggKiBnYW1lRGlyZWN0b3Iuc3RpY2suYW5jaG9yWDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pID0gZ2FtZURpcmVjdG9yLmhlcm8uZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pLnBsYXkoJ2hlcm9QdXNoJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25IZXJvVGljaygpIHtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3Iuc3RpY2tMZW5ndGhlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmkgPSBnYW1lRGlyZWN0b3IuaGVyby5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBhbmkucGxheSgnaGVyb1RpY2snKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblN0aWNrRmFsbCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3N0aWNrIGZhbGwgYWN0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGlja0ZhbGwgPSBjYy5yb3RhdGVCeSgwLjUsIDkwKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGlja0ZhbGwuZWFzaW5nKGNjLmVhc2VJbigzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxGdW5jID0gY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RpY2tMZW5ndGggPSBnYW1lRGlyZWN0b3Iuc3RpY2suaGVpZ2h0IC0gZ2FtZURpcmVjdG9yLnN0aWNrLndpZHRoICogZ2FtZURpcmVjdG9yLnN0aWNrLmFuY2hvclg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGlja0xlbmd0aCA8IGdhbWVEaXJlY3Rvci5jdXJyZW50TGFuZFJhbmdlIHx8IHN0aWNrTGVuZ3RoID4gZ2FtZURpcmVjdG9yLmN1cnJlbnRMYW5kUmFuZ2UgKyBnYW1lRGlyZWN0b3Iuc2Vjb25kTGFuZC53aWR0aCkgey8vZmFpbGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnNtLmhlcm9Nb3ZlVG9TdGlja0VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugey8vc3VjY2Vzc2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmc20uaGVyb01vdmVUb0xhbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGlja0xlbmd0aCA+IGdhbWVEaXJlY3Rvci5jdXJyZW50TGFuZFJhbmdlICsgZ2FtZURpcmVjdG9yLnNlY29uZExhbmQud2lkdGggLyAyIC0gNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHN0aWNrTGVuZ3RoIDwgZ2FtZURpcmVjdG9yLmN1cnJlbnRMYW5kUmFuZ2UgKyBnYW1lRGlyZWN0b3Iuc2Vjb25kTGFuZC53aWR0aCAvIDIgKyA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZURpcmVjdG9yLnBlcmZlY3QrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3IuZ2V0U2NvcmUoZ2FtZURpcmVjdG9yLnBlcmZlY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbCA9IGdhbWVEaXJlY3Rvci5wZXJmZWN0TGFiZWwuZ2V0Q29tcG9uZW50KHBlcmZlY3RMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGwuc2hvd1BlcmZlY3QoZ2FtZURpcmVjdG9yLnBlcmZlY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3IucGVyZmVjdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2UgPSBjYy5zZXF1ZW5jZShzdGlja0ZhbGwsIGNhbGxGdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3Iuc3RpY2sucnVuQWN0aW9uKHNlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkhlcm9Nb3ZlVG9MYW5kKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmkgPSBnYW1lRGlyZWN0b3IuaGVyby5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbEZ1bmMgPSBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaS5zdG9wKCdoZXJvUnVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVEaXJlY3Rvci5nZXRTY29yZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmc20ubGFuZE1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhbmkucGxheSgnaGVyb1J1bicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVEaXJlY3Rvci5oZXJvTW92ZShnYW1lRGlyZWN0b3IuaGVybywgeyBsZW5ndGg6IGdhbWVEaXJlY3Rvci5jdXJyZW50TGFuZFJhbmdlICsgZ2FtZURpcmVjdG9yLnNlY29uZExhbmQud2lkdGgsIGNhbGxGdW5jOiBjYWxsRnVuYyB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkxhbmRNb3ZlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWxsRnVuYyA9IGNjLmNhbGxGdW5jKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZURpcmVjdG9yLnJlZ2lzdGVyRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3IubGFuZENyZWF0ZUFuZE1vdmUoY2FsbEZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uSGVyb01vdmVUb1N0aWNrRW5kKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmkgPSBnYW1lRGlyZWN0b3IuaGVyby5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbEZ1bmMgPSBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaS5zdG9wKCdoZXJvUnVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzbS5oZXJvRG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaS5wbGF5KCdoZXJvUnVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZURpcmVjdG9yLmhlcm9Nb3ZlKGdhbWVEaXJlY3Rvci5oZXJvLCB7IGxlbmd0aDogZ2FtZURpcmVjdG9yLnN0aWNrLmhlaWdodCwgY2FsbEZ1bmM6IGNhbGxGdW5jIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uSGVyb0Rvd24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxGdW5jID0gY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmc20uZ2FtZU92ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3Iuc3RpY2tBbmRIZXJvRG93bkFjdGlvbihjYWxsRnVuYyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25HYW1lT3ZlcigpIHtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lRGlyZWN0b3Iub3ZlckxhYmVsLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblJlc3RhcnQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiTWFpbkdhbWVTY2VuZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmc20gPSBmbi5mc207XHJcbiAgICAgICAgLy9pbml0IGRhdGFcclxuICAgICAgICAvLyBhbGVydChzdG9yYWdlTWFuYWdlci5nZXRIaWdoZXN0U2NvcmUoKSk7XHJcbiAgICAgICAgZ2FtZURpcmVjdG9yID0gdGhpcztcclxuICAgICAgICB0aGlzLnJ1bkxlbmd0aCA9IDAsXHJcbiAgICAgICAgICAgIHRoaXMuc3RpY2sgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3RpY2tMZW5ndGhlbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgICAgIHRoaXMucGVyZmVjdCA9IDA7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGFuZFJhbmdlID0gMDtcclxuICAgICAgICB0aGlzLmhlcm9Xb3JsZFBvc1ggPSAwO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlSGlnaHRlc3RTY29yZUxhYmVsKCk7XHJcblxyXG4gICAgICAgIC8vY3JlYXRlIG5ldyBsYW5kO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlTmV3TGFuZCgpO1xyXG4gICAgICAgIHZhciByYW5nZSA9IHRoaXMuZ2V0TGFuZFJhbmdlKCk7XHJcbiAgICAgICAgdGhpcy5oZXJvV29ybGRQb3NYID0gdGhpcy5maXJzdExhbmQud2lkdGggLSAoMSAtIHRoaXMuaGVyby5hbmNob3JYKSAqIHRoaXMuaGVyby53aWR0aCAtIHRoaXMuc3RpY2tXaWR0aDtcclxuICAgICAgICB0aGlzLnNlY29uZExhbmQuc2V0UG9zaXRpb24ocmFuZ2UgKyB0aGlzLmZpcnN0TGFuZC53aWR0aCwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgICAgIC8vaW5pdCBoZXJvIGFuaW1hdGlvbiBjYWxsYmFjay5cclxuICAgICAgICB2YXIgYW5pID0gZ2FtZURpcmVjdG9yLmhlcm8uZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcbiAgICAgICAgLy9hbmkub24oJ3N0b3AnLChldmVudCk9PntcclxuICAgICAgICAvL2lmKGV2ZW50LnRhcmdldC5uYW1lID09J2hlcm9UaWNrJyl7XHJcbiAgICAgICAgLy9mc20uc3RpY2tGYWxsKCk7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy99KTtcclxuICAgICAgICBhbmkub24oJ3N0b3AnLCB0aGlzLm9uU3RvcCwgdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uU3RvcDpmdW5jdGlvbiAoZXZlbnQsIHN0YXRlKSB7XHJcbiAgICAgICAgaWYoc3RhdGUgJiZzdGF0ZS5fbmFtZSAmJiBzdGF0ZS5fbmFtZSA9PT0gJ2hlcm9UaWNrJyl7XHJcbiAgICAgICAgICAgIGZzbS5zdGlja0ZhbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHJlZ2lzdGVyRXZlbnQoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMudG91Y2hTdGFydC5iaW5kKHRoaXMpLCB0aGlzLm5vZGUpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgdGhpcy50b3VjaEVuZC5iaW5kKHRoaXMpLCB0aGlzLm5vZGUpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0NBTkNFTCwgdGhpcy50b3VjaENhbmNlbC5iaW5kKHRoaXMpLCB0aGlzLm5vZGUpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwib25cIik7XHJcbiAgICB9LFxyXG5cclxuICAgIHVucmVnaXN0ZXJFdmVudCgpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcy50YXJnZXRPZmYodGhpcy5ub2RlKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIm9mZlwiKTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGUoZHQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhkdCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RpY2tMZW5ndGhlbikge1xyXG4gICAgICAgICAgICB0aGlzLnN0aWNrLmhlaWdodCArPSBkdCAqIHRoaXMuc3RpY2tTcGVlZDtcclxuICAgICAgICAgICAgLy8gdGhpcy5zdGljay5oZWlnaHQgPSB0aGlzLmN1cnJlbnRMYW5kUmFuZ2UgKyB0aGlzLnNlY29uZExhbmQud2lkdGgvMjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgdG91Y2hTdGFydChldmVudCkge1xyXG4gICAgICAgIGZzbS5zdGlja0xlbmd0aGVuKCk7XHJcbiAgICAgICAgY2MubG9nKFwidG91Y2hTdGFydFwiKTtcclxuICAgIH0sXHJcbiAgICB0b3VjaEVuZChldmVudCkge1xyXG4gICAgICAgIGZzbS5oZXJvVGljaygpO1xyXG4gICAgICAgIGNjLmxvZyhcInRvdWNoRW5kXCIpO1xyXG4gICAgfSxcclxuICAgIHRvdWNoQ2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMudG91Y2hFbmQoKTtcclxuICAgICAgICBjYy5sb2coXCJ0b3VjaENhbmNlbFwiKTtcclxuICAgIH0sXHJcbiAgICBzdGlja0FuZEhlcm9Eb3duQWN0aW9uKGNhbGxGdW5jKSB7XHJcbiAgICAgICAgLy9zdGljayBkb3duIGFjdGlvbjtcclxuICAgICAgICB2YXIgc3RpY2tBY3Rpb24gPSBjYy5yb3RhdGVCeSgwLjUsIDkwKTtcclxuICAgICAgICBzdGlja0FjdGlvbi5lYXNpbmcoY2MuZWFzZUluKDMpKTtcclxuICAgICAgICB0aGlzLnN0aWNrLnJ1bkFjdGlvbihzdGlja0FjdGlvbik7XHJcbiAgICAgICAgLy9oZXJvIGRvd24gYWN0aW9uO1xyXG4gICAgICAgIHZhciBoZXJvQWN0aW9uID0gY2MubW92ZUJ5KDAuNSwgY2MudjIoMCwgLTMwMCAtIHRoaXMuaGVyby5oZWlnaHQpKTtcclxuICAgICAgICBoZXJvQWN0aW9uLmVhc2luZyhjYy5lYXNlSW4oMykpO1xyXG4gICAgICAgIHZhciBzZXEgPSBjYy5zZXF1ZW5jZShoZXJvQWN0aW9uLCBjYWxsRnVuYyk7XHJcbiAgICAgICAgdGhpcy5oZXJvLnJ1bkFjdGlvbihzZXEpO1xyXG4gICAgfSxcclxuICAgIGhlcm9Nb3ZlKHRhcmdldCwgZGF0YSkge1xyXG4gICAgICAgIHZhciB0aW1lID0gZGF0YS5sZW5ndGggLyB0aGlzLmhlcm9Nb3ZlU3BlZWQ7XHJcbiAgICAgICAgdmFyIGhlcm9Nb3ZlID0gY2MubW92ZUJ5KHRpbWUsIGNjLnYyKGRhdGEubGVuZ3RoLCAwKSk7XHJcbiAgICAgICAgaWYgKGRhdGEuY2FsbEZ1bmMpIHtcclxuICAgICAgICAgICAgdmFyIHNlID0gY2Muc2VxdWVuY2UoaGVyb01vdmUsIGRhdGEuY2FsbEZ1bmMpO1xyXG4gICAgICAgICAgICB0aGlzLmhlcm8ucnVuQWN0aW9uKHNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhlcm8ucnVuQWN0aW9uKGhlcm9Nb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbGFuZENyZWF0ZUFuZE1vdmUoY2FsbEZ1bmMpIHtcclxuICAgICAgICB2YXIgd2luU2l6ZSA9IGNjLmRpcmVjdG9yLmdldFdpblNpemUoKTtcclxuICAgICAgICAvL2ZpcnN0bGFuZDtcclxuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5jdXJyZW50TGFuZFJhbmdlICsgdGhpcy5zZWNvbmRMYW5kLndpZHRoO1xyXG4gICAgICAgIHRoaXMucnVuTGVuZ3RoICs9IGxlbmd0aDtcclxuICAgICAgICB2YXIgYWN0aW9uID0gY2MubW92ZUJ5KHRoaXMubW92ZUR1cmF0aW9uLCBjYy52MigtbGVuZ3RoLCAwKSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihhY3Rpb24pO1xyXG4gICAgICAgIHRoaXMuZmlyc3RMYW5kID0gdGhpcy5zZWNvbmRMYW5kO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZU5ld0xhbmQoKTtcclxuXHJcbiAgICAgICAgLy9sYW5kUmFuZ2VcclxuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmdldExhbmRSYW5nZSgpO1xyXG5cclxuICAgICAgICAvL3NlY29uZGxhbmQ7XHJcbiAgICAgICAgdGhpcy5zZWNvbmRMYW5kLnNldFBvc2l0aW9uKHRoaXMucnVuTGVuZ3RoICsgd2luU2l6ZS53aWR0aCwgMCk7XHJcbiAgICAgICAgdmFyIGwgPSB3aW5TaXplLndpZHRoIC0gcmFuZ2UgLSB0aGlzLmhlcm9Xb3JsZFBvc1ggLSB0aGlzLmhlcm8ud2lkdGggKiB0aGlzLmhlcm8uYW5jaG9yWCAtIHRoaXMuc3RpY2tXaWR0aDtcclxuICAgICAgICB2YXIgc2Vjb25kQWN0aW9uID0gY2MubW92ZUJ5KHRoaXMubW92ZUR1cmF0aW9uLCBjYy52MigtbCwgMCkpO1xyXG4gICAgICAgIHZhciBzZXEgPSBjYy5zZXF1ZW5jZShzZWNvbmRBY3Rpb24sIGNhbGxGdW5jKTtcclxuICAgICAgICB0aGlzLnNlY29uZExhbmQucnVuQWN0aW9uKHNlcSk7XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlU3RpY2soKSB7XHJcbiAgICAgICAgY2MubG9nKFwic2NcIik7XHJcbiAgICAgICAgdmFyIHN0aWNrID0gc3ByaXRlQ3JlYXRvci5jcmVhdGVTdGljayh0aGlzLnN0aWNrV2lkdGgpO1xyXG4gICAgICAgIHN0aWNrLnBhcmVudCA9IHRoaXMubm9kZTtcclxuICAgICAgICByZXR1cm4gc3RpY2tcclxuICAgIH0sXHJcbiAgICBjcmVhdGVOZXdMYW5kKCkge1xyXG4gICAgICAgIHRoaXMuc2Vjb25kTGFuZCA9IHNwcml0ZUNyZWF0b3IuY3JlYXRlTmV3TGFuZCh0aGlzLmdldExhbmRXaWR0aCgpKTtcclxuICAgICAgICB0aGlzLnNlY29uZExhbmQucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgfSxcclxuICAgIGdldFNjb3JlKG51bSkge1xyXG4gICAgICAgIGlmIChudW0pIHtcclxuICAgICAgICAgICAgdGhpcy5zY29yZSArPSBudW07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zY29yZSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RvcmFnZU1hbmFnZXIuZ2V0SGlnaGVzdFNjb3JlKCkgPCB0aGlzLnNjb3JlKSB7XHJcbiAgICAgICAgICAgIHN0b3JhZ2VNYW5hZ2VyLnNldEhpZ2hlc3RTY29yZSh0aGlzLnNjb3JlKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VIaWdodGVzdFNjb3JlTGFiZWwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY29yZUxhYmVsLnN0cmluZyA9IFwi5b6X5YiGOlwiICsgdGhpcy5zY29yZTtcclxuICAgIH0sXHJcbiAgICBjaGFuZ2VIaWdodGVzdFNjb3JlTGFiZWwoKSB7XHJcbiAgICAgICAgdGhpcy5oaWdodGVzdFNjb3JlTGFiZWwuc3RyaW5nID0gXCLmnIDpq5jliIY6XCIgKyBzdG9yYWdlTWFuYWdlci5nZXRIaWdoZXN0U2NvcmUoKTtcclxuICAgIH0sXHJcbiAgICBnZXRMYW5kUmFuZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGFuZFJhbmdlID0gdGhpcy5sYW5kUmFuZ2UueCArICh0aGlzLmxhbmRSYW5nZS55IC0gdGhpcy5sYW5kUmFuZ2UueCkgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgIGlmICh3aW5TaXplLndpZHRoIDwgdGhpcy5jdXJyZW50TGFuZFJhbmdlICsgdGhpcy5oZXJvV29ybGRQb3NYICsgdGhpcy5oZXJvLndpZHRoICsgdGhpcy5zZWNvbmRMYW5kLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudExhbmRSYW5nZSA9IHdpblNpemUud2lkdGggLSB0aGlzLmhlcm9Xb3JsZFBvc1ggLSB0aGlzLmhlcm8ud2lkdGggLSB0aGlzLnNlY29uZExhbmQud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRMYW5kUmFuZ2U7XHJcbiAgICB9LFxyXG4gICAgZ2V0TGFuZFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxhbmRXaWR0aC54ICsgKHRoaXMubGFuZFdpZHRoLnkgLSB0aGlzLmxhbmRXaWR0aC54KSAqIE1hdGgucmFuZG9tKCk7XHJcbiAgICB9XHJcbn0pO1xyXG5tb2R1bGUuZXhwb3J0cyA9IGZzbTsiXX0=